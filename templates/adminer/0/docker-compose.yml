version: '2'
services:
  data:
    image: busybox
    labels:
      io.rancher.container.start_once: true
      io.rancher.container.hostname_override: container_name
      io.rancher.container.pull_image: always
    volumes:
      - /usr/local/openvpn_as/etc
  server:
    privileged: true
    image: registry.monach.us/docker/openvpn-as
    labels:
      io.rancher.container.pull_image: always
      io.rancher.container.hostname_override: container_name
      io.rancher.sidekicks: data
    volumes_from:
      - data
    {{- if eq .Value.USEADMINPORT "true" }}
    ports:
      - 1194:1194/udp
      - 943:943/tcp
    {{- else }}
    ports:
      - 1194:1194/udp
    {{- end }}
